#!/usr/bin/perl -lw

my $Max_Length = 8;
my $Num_Words  = 3;
my $Words      = "/usr/share/dict/words";

test() if @ARGV and $ARGV[0] eq '--test';
print main();

sub main {
    my @words;
    open my $fh, "<", $Words or die $!;
    my $count = 0;
    while (my $line = <$fh>) {
        chomp $line;
        next if length $line > $Max_Length;
        $count++;
        if ( $count <= $Num_Words ) {
            $words[$count-1] = $line;
        } elsif ( rand($count) <= $Num_Words ) {
            $words[rand($Num_Words)] = $line;
        }
    }

    return join ".", @words;
}

sub test {
    use Test::More;

    my $output = main();
    my @words = split m{\.}, $output;

    is @words, $Num_Words, "output \$Num_Words words";

    for my $word (@words) {
        like $word, qr/^\w+$/, "  it is a word";
    }

    done_testing();
    exit;
}
